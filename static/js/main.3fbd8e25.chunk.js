(this.webpackJsonpcanadianshelp=this.webpackJsonpcanadianshelp||[]).push([[0],{21:function(e,t,a){e.exports=a(61)},26:function(e,t,a){},59:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(17),r=a.n(i),c=(a(26),a(9)),s=a(8),l=a(2),d=a(3),u=a(4),m=a(5);var p=function(e){if(!e.data)return null;var t,a=[],n=Object(s.a)(e.data.entries());try{var i=function(){var n=Object(c.a)(t.value,2),i=n[0],r=n[1],s=o.a.createElement("div",{className:"sidebar__item",key:i,onClick:function(){return e.onSidebarItemClick(r)}},o.a.createElement("div",{className:"sidebar__item-name"},r.name),o.a.createElement("div",null,r.email),o.a.createElement("div",{className:"sidebar__item-services"},r.services),!!r.distance&&o.a.createElement("div",null,r.distance," km"),i<e.data.length&&o.a.createElement("hr",null));a.push(s)};for(n.s();!(t=n.n()).done;)i()}catch(r){n.e(r)}finally{n.f()}return o.a.createElement("div",{className:"sidebar__container"},o.a.createElement("div",{className:"sidebar__header"},"Canadians Help"),o.a.createElement("div",{className:"sidebar__helptext"},"Find local volunteers nearby willing to lend a hand"),a)},v=a(1),h=a.n(v);a(27);h.a.accessToken="pk.eyJ1IjoiZGFucGF6IiwiYSI6ImNrODNjdXo4NjFjN2EzbG5xdzl6YTZnZHQifQ.zPcJ5aimYUyAQvXUIdUsVw";var f=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={lng:-79.4,lat:43.7,zoom:10},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new h.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v11",center:[this.state.lng,this.state.lat],zoom:this.state.zoom});t.on("load",(function(){e.props.onMapLoaded(t)})),t.on("move",(function(){e.setState({lng:t.getCenter().lng.toFixed(4),lat:t.getCenter().lat.toFixed(4),zoom:t.getZoom().toFixed(2)})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{ref:function(t){return e.mapContainer=t},className:"map__container"})}}]),a}(o.a.Component),b=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){if(!this.props.map||!this.props.data)return null;var e=this.props.data,t=e.name,a=e.email,n=e.services,o=e.lng,i=e.lat,r=new h.a.Popup({offset:25}).setHTML("<div>".concat(t,"</div><div>").concat(a,"</div><div>").concat(n||"","</div>"));return document.createElement("div").id="marker",(new h.a.Marker).setLngLat([o,i]).setPopup(r).addTo(this.props.map),null}}]),a}(o.a.Component),k=a(18),j=a.n(k),g=(a(58),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);var o=new j.a({accessToken:h.a.accessToken,mapboxgl:h.a});return o.on("result",(function(e){e.result&&n.props.onGeocodeResult(e.result)})),n.state={geocoder:o,initialized:!1},n}return Object(d.a)(a,[{key:"render",value:function(){return!this.props.map||this.state.initialized||(this.props.map.addControl(this.state.geocoder),this.setState({initialized:!0})),null}}]),a}(o.a.Component)),y=a(19),O=a.n(y),E=(a(59),a(20)),w=a.n(E),C=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onMapLoaded=function(e){n.setState({map:e})},n.onGeocodeResult=function(e){n.setState({userLocation:{lat:e.center[1],lng:e.center[0]}});var t=(n.state.data||[]).map((function(t){return t.distance=w()(e.center,[t.lng,t.lat],{units:"kilometers"}).toFixed(1),t}));n.setState({data:t})},n.onSidebarItemClick=function(e){n.state.map.flyTo({center:[e.lng,e.lat],zoom:15})},n.state={map:null,data:[],userLocation:null},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.parse("/data.csv",{download:!0,complete:function(t){var a=t.data.map((function(e,t){return 0!==t?{lat:e[3],lng:e[4],name:e[1],email:e[9],services:e[6]}:null})).filter((function(e){return e}));e.setState({data:a})}})}},{key:"render",value:function(){var e,t=[],a=Object(s.a)(this.state.data.entries());try{for(a.s();!(e=a.n()).done;){var n=Object(c.a)(e.value,2),i=n[0],r=n[1];t.push(o.a.createElement(b,{key:i,map:this.state.map,data:r}))}}catch(l){a.e(l)}finally{a.f()}return o.a.createElement("div",{className:"App"},o.a.createElement(f,{onMapLoaded:this.onMapLoaded}),o.a.createElement(p,{data:this.state.data,onSidebarItemClick:this.onSidebarItemClick}),o.a.createElement(g,{map:this.state.map,onGeocodeResult:this.onGeocodeResult}),t)}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.3fbd8e25.chunk.js.map